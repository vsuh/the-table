# Техническое задание

## Название проекта

**the-table** — веб-приложение для отображения и редактирования театрального расписания.

## Назначение документа

Настоящее техническое задание определяет требования к разработке системы, обеспечивающей отображение расписания репетиций и спектаклей театра и предоставляющей служебный интерфейс для редактирования расписания уполномоченным сотрудникам.

Контактное лицо: 

---

## 1. Общие положения

### 1.a. Цель проекта

Целью данного программного решения является обеспечение сотрудников театра доступом к актуальной информации о занятости артистов, помещений и сотрудников цехов по датам и часам.

### 1.b. Состав системы

Приложение представляет собой систему из двух частей:

- **Витрина расписания** — публичная страница, доступная по ссылке, требующая авторизации;
- **Служебный интерфейс** — интерфейс для операторов и администраторов, реализуемый в контейнере.

### 1.c. Основные особенности

- Расписание редактируется оператором в течение дня, с возможностью предпросмотра и многократных публикаций;
- Приложение обеспечивает одновременную работу нескольких операторов над одним черновиком расписания, с блокировкой карточек на время редактирования.

---

## 2. Компоненты системы

### 2.a. Витрина расписания

- Отображает данные опубликованного расписания с учётом требований к визуализации (см. раздел 6);
- Витрина доступна по ссылке и требует авторизации (см. 2.b);
- Поддерживается просмотр с мобильных устройств и в браузерах (см. 5.b);
- Обновление витрины происходит автоматически как результат публикации расписания.

### 2.b. Авторизация и безопасность витрины

- Доступ к витрине возможен только после прохождения авторизации через стороннего провайдера (OAuth / Google / SSO);
- Провайдеры аутентификации должны быть настраиваемыми;
- Авторизация исключает необходимость ввода пароля.

### 2.c. Интерфейс оператора

- Интерфейс оператора: предназначен для редактирования расписания в реальном времени, сдвига периода расписания на день вперёд-назад, работы с карточками, отображения предпросмотра черновика и выполнения публикации;
- Поддерживается одновременная работа нескольких операторов;
- Карточки редактируются по отдельности. Система фиксируют автора и время каждого изменения карточки.

### 2.d. Служебный интерфейс

- Включает интерфейс оператора и интерфейс администратора;
- Интерфейс администратора предоставляет:
  - ведение справочников (площадки, роли, ресурсы, типы событий);
  - управление пользователями и правами;
  - настройку OAuth / SSO провайдеров;
- Служебный интерфейс разворачивается в одном или нескольких контейнерах Docker.

---

## 3. Работа с расписанием

### 3.1. Таблица расписания

- Таблица состоит из 7 колонок (от сегодня до +6 дней);
- Каждая колонка делится на 2 строки:
  - верхняя — для мероприятий (репетиции, собрания и т.п.);
  - нижняя — для спектаклей (на 4 площадках);
- Всего 14 ячеек фиксированного размера.

### 3.2. Карточки событий

- Каждая карточка размещается в одной из 14 ячеек;
- Карточка содержит данные в соответствии с шаблоном по типу события;
- Оператор может перетаскивать карточки в пределах ячейки, изменяя их порядок;
- Размер карточки регулируется автоматически, без переполнения;
- Заголовок карточки оформляется визуально для разделения карточек (КРАСНЫЙ фон, БЕЛЫЙ жирный капс);
- Расписание редактируется в изолированном черновике, до момента явной публикации оператором.

---

## 4. Управление и редактирование расписания

### 4.a. Черновик

- Все изменения выполняются в черновике и не влияют на витрину до публикации;
- Поддерживаются предпросмотр, отмена сдвига, сохранение черновика.

### 4.b. Операции с карточками

- Добавление карточки: кнопка → выбор ячейки → выбор типа → заполнение формы → предпросмотр;
- Изменение карточки: выбор карточки → редактирование формы → предпросмотр;
- Удаление карточки: выбор карточки → подтверждение → удаление из предпросмотра.

### 4.c. Сдвиг периода расписания

- Сдвиг дня вперёд: удаляется самый левый день, добавляется новый справа;
- Отмена сдвига: восстанавливается удалённый день слева, удаляется крайний справа.

### 4.d. Публикация

- Оператор вручную публикует черновик;
- Создаётся снимок расписания (PDF или JSON);
- Фиксируются автор, дата и версия публикации.

### 4.e. Журналирование

- Каждая карточка хранит историю изменений (автор, дата, ссылка на данные карточки);
- Каждая публикация — автор, дата, ссылка на состав опубликованных карточек.

### 4.f. Блокировка карточек

- Редактируемая карточка блокируется другим пользователям до завершения редактирования.

---

## 5. Нефункциональные требования

### 5.a. Общие

- Приложение служебного интерфейса развёртывается в контейнерах Docker, витрина размещается на публичном веб-сервере;
- Ожидается стабильная работа в локальной сети или внутреннем VPN.

### 5.b. Кроссплатформенность

- Интерфейс витрины должен корректно отображаться на экране смартфона (Android, iPhone);
- Обеспечить поддержку браузеров: Safari, Chrome, Edge.

### 5.c. Безопасность

- Авторизация обязательна для всех пользователей;
- Доступ к интерфейсу оператора и администратора допускается только авторизованным пользователям с необходимыми полномочиями.

### 5.d. Масштабируемость

- Расширяемость по типам событий (шаблоны карточек) и площадкам

---

## 6. Визуальные и UI требования

### 6.a. Компоновка

- 7 колонок — дни (от сегодня до +6);
- 2 строки — мероприятия (вверху), спектакли (внизу);
- Ячейки фиксированного размера (1/7 ширины x 1/2 высоты);
- Карточки размещаются по вертикали, визуально отделяются заголовком (жирный КАПС на красном фоне).

### 6.b. Форматы карточек

- Спектакль:

  - Время начала, Помреж
  - Название
  - Артисты и роли (свободная форма)

- Репетиция:

  - Место | Ресурсы (в строке, выравнено влево/вправо)
  - Время
  - Название/участники
  - Ответственный | Ответственный 2 (в строке)

- Сбор труппы / собрание:

  - Время

---

